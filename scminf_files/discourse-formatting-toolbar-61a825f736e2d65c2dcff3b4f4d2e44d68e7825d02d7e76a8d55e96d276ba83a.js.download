define("discourse/plugins/discourse-formatting-toolbar/discourse/initializers/formattingtlb-ui",["exports","discourse/lib/plugin-api","discourse/components/d-editor"],(function(t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"formattingtlb-ui",initialize:function(t){(0,o.withPluginApi)("0.1",(function(t){return function(t){t.container.lookup("site-settings:main").formattingtlb_enabled&&(t.onToolbarCreate((function(t){t.addButton({id:"underline_ui_button",group:"fontStyles",icon:"underline",perform:function(t){return t.applySurround("[u]","[/u]","underline_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"addimg_ui_button",group:"extras",icon:"far-image",perform:function(t){return t.applySurround("[img]","[/img]","addimg_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"floatl_ui_button",group:"extras",icon:"indent",perform:function(t){return t.applySurround("[floatl]","[/floatl]","floatl_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"left_ui_button",group:"extras",icon:"align-left",perform:function(t){return t.applySurround("[left]","[/left]","left_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"center_ui_button",group:"extras",icon:"align-center",perform:function(t){return t.applySurround("[center]","[/center]","center_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"right_ui_button",group:"extras",icon:"align-right",perform:function(t){return t.applySurround("[right]","[/right]","right_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"justify_ui_button",group:"extras",icon:"align-justify",perform:function(t){return t.applySurround("[justify]","[/justify]","justify_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"color_ui_button",group:"extras",icon:"palette",perform:function(t){return t.applySurround("[color=#]","[/color]","color_ui_default_text")}})})),t.onToolbarCreate((function(t){t.addButton({id:"size_ui_button",group:"extras",icon:"font",perform:function(t){return t.applySurround("[size=4]","[/size]","size_ui_default_text")}})})))}(t)}),{noApi:function(){return priorToApi(t)}})}};t.default=r})),define("discourse/plugins/discourse-formatting-toolbar/lib/discourse-markdown/formatting_bbcode",["exports","pretty-text/pretty-text"],(function(t,o){"use strict";function n(t){for(;t!==(t=t.replace(/\[color=([^\]]+)\]((?:(?!\[color=[^\]]+\]|\[\/color\])[\S\s])*)\[\/color\]/gi,(function(t,o,n){return"<font color='".concat(o,"'>").concat(n,"</font>")}))););return t}function r(t){for(;t!==(t=t.replace(/\[size=([^\]]+)\]((?:(?!\[size=[^\]]+\]|\[\/size\])[\S\s])*)\[\/size\]/gi,(function(t,o,n){return"<font size='".concat(o,"'>").concat(n,"</font>")}))););return t}function e(t,o,n){return function(r,e,i){r.tag=e.tag=t,r.content=e.content="",r.type="bbcode_open",e.type="bbcode_close",r.nesting=1,e.nesting=-1,r.attrs=[[o,n?n(i):i.attrs._default]]}}function i(t){var o=t.inline.bbcode.ruler;o.push("size",{tag:"size",wrap:e("font","size")}),o.push("color",{tag:"color",wrap:e("font","color")}),o.push("small",{tag:"small",wrap:e("span","style",(function(){return"font-size:x-small"}))}),o.push("floatl",{tag:"floatl",wrap:e("div","class",(function(){return"floatl"}))}),o.push("floatr",{tag:"floatr",wrap:e("div","class",(function(){return"floatr"}))}),o.push("floatc",{tag:"floatc",wrap:e("div","class",(function(){return"floatc"}))}),o.push("left",{tag:"left",wrap:e("div","class",(function(){return"bbcodeleft"}))}),o.push("center",{tag:"center",wrap:e("div","class",(function(){return"bbcodecenter"}))}),o.push("right",{tag:"right",wrap:e("div","class",(function(){return"bbcoderight"}))}),o.push("justify",{tag:"justify",wrap:e("div","class",(function(){return"bbcodejustify"}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(t){if(t.allowList(["div.floatl","div.floatr","div.floatc","div.bbcodeleft","div.bbcodecenter","div.bbcoderight","div.bbcodejustify","font[color=*]","font[size=*]"]),t.allowList({custom:function(t,o,n){if("span"===t&&"style"===o)return/^font-size:.*$/.exec(n)}}),t.markdownIt)return void t.registerPlugin(i);var o=(0,requirejs("pretty-text/engines/discourse-markdown/bbcode").builders)(t),e=(o.register,o.replaceBBCode);o.rawBBCode,o.replaceBBCodeParamsRaw;e("small",(function(t){return["span",{style:"font-size:x-small"}].concat(t)})),e("floatl",(function(t){return["div",{class:"floatl"}].concat(t)})),e("floatr",(function(t){return["div",{class:"floatr"}].concat(t)})),e("floatc",(function(t){return["div",{class:"floatc"}].concat(t)})),e("left",(function(t){return["div",{class:"bbcodeleft"}].concat(t)})),e("center",(function(t){return["div",{class:"bbcodecenter"}].concat(t)})),e("right",(function(t){return["div",{class:"bbcoderight"}].concat(t)})),e("justify",(function(t){return["div",{class:"bbcodejustify"}].concat(t)})),t.addPreProcessor(n),t.addPreProcessor(r)},(0,o.registerOption)((function(t,o){return o.features.formatting_bbcode=!0}))}));