define("discourse/plugins/procourse-static-pages/discourse/admin-plugins-procourse-static-pages-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("procourse-static-pages")}}})),define("discourse/plugins/procourse-static-pages/discourse/controllers/admin-plugins-procourse-static-pages",["exports","../models/page"],(function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=Ember.Controller.extend({pageURL:document.location.origin+"/page/",basePCPage:function(){var e=Em.Object.create({});return e.set("title",I18n.t("admin.procourse_static_pages.pages.new_title")),e.set("active",!1),e}.property("model.@each.id"),removeSelected:function(){this.get("model").removeObject(this.get("selectedItem")),this.set("selectedItem",null)},editTitle:function(){this.set("editingTitle",!0),this.get("selectedItem")&&!this.get("selectedItem").custom_slug&&this.get("selectedItem").selected&&this.get("selectedItem").set("slug",this.slugify(this.get("selectedItem").title)),this.set("editingTitle",!1)}.observes("selectedItem.title"),editSlug:function(){this.get("selectedItem")&&!this.get("editingTitle")&&this.get("selectedItem").selected&&(this.get("originals").slug==this.get("selectedItem").slug?this.get("selectedItem").set("custom_slug",this.get("originals").custom_slug):this.get("selectedItem").set("custom_slug",!0))}.observes("selectedItem.slug"),changed:function(){this.get("originals")&&this.get("selectedItem")?this.get("originals").title==this.get("selectedItem").title&&this.get("originals").slug==this.get("selectedItem").slug&&this.get("originals").group==this.get("selectedItem").group&&this.get("originals").raw==this.get("selectedItem").raw&&this.get("originals").html==this.get("selectedItem").html&&this.get("originals").html_content==this.get("selectedItem").html_content&&this.get("originals").cooked==this.get("selectedItem").cooked||!this.get("selectedItem").title||!this.get("selectedItem").html&&!this.get("selectedItem").raw||this.get("selectedItem").html&&!this.get("selectedItem").html_content?this.set("disableSave",!0):this.set("disableSave",!1):this.set("disableSave",!0)}.observes("selectedItem.title","selectedItem.slug","selectedItem.group","selectedItem.raw","selectedItem.html","selectedItem.html_content"),slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},actions:{selectPCPage:function(e){var s=this;t.default.customGroups().then((function(t){s.set("customGroups",t),s.get("selectedItem")&&s.get("selectedItem").set("selected",!1),s.set("originals",{title:e.title,active:e.active,slug:e.slug,group:e.group,raw:e.raw,cooked:e.cooked,custom_slug:e.custom_slug,html:e.html,html_content:e.html_content}),s.set("disableSave",!0),s.set("selectedItem",e),e.set("savingStatus",null),e.set("selected",!0)}))},newPCPage:function(){var e=this.get("basePCPage"),t=Em.Object.create(e),s=I18n.t("admin.procourse_static_pages.pages.new_title");t.set("title",s),t.set("slug",this.slugify(s)),t.set("slugEdited",!1),t.set("group",null),t.set("newRecord",!0),t.set("html",!1),t.set("html_content",""),this.get("model").pushObject(t),this.send("selectPCPage",t)},toggleEnabled:function(){this.get("selectedItem").toggleProperty("active"),t.default.save(this.get("selectedItem"),!0)},disableEnable:function(){return!this.get("id")||this.get("saving")}.property("id","saving"),newRecord:function(){return!this.get("id")}.property("id"),save:function(){this.get("selectedItem").slug==this.slugify(this.get("selectedItem").title)&&this.get("selectedItem").set("custom_slug",!1),t.default.save(this.get("selectedItem")),this.send("selectPCPage",this.get("selectedItem"))},copy:function(e){var s=t.default.copy(e);s.set("title",I18n.t("admin.customize.colors.copy_name_prefix")+" "+e.get("title")),this.get("model").pushObject(s),this.send("selectPCPage",s),this.set("disableSave",!1)},destroy:function(){var e=this,s=e.get("selectedItem");return bootbox.confirm(I18n.t("admin.procourse_static_pages.pages.delete_confirm"),I18n.t("no_value"),I18n.t("yes_value"),(function(l){l&&(s.get("id")?t.default.destroy(e.get("selectedItem")).then((function(){e.removeSelected()})):e.removeSelected())}))}}});e.default=s})),define("discourse/plugins/procourse-static-pages/discourse/models/page-show",["exports","discourse/lib/ajax"],(function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={findById:function(e){return(0,t.ajax)("/page/".concat(e.id))}};e.default=s})),define("discourse/plugins/procourse-static-pages/discourse/models/page",["exports","discourse/lib/ajax","pretty-text/pretty-text","discourse/models/group","@ember/object","discourse-common/lib/get-url"],(function(e,t,s,l,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n.default.extend(Ember.Copyable,{init:function(){this._super()}});function o(){var e=Discourse.__container__.lookup("site-settings:main");return(0,s.buildOptions)({getURL:i.getURLWithCDN,currentUser:Discourse.__container__.lookup("current-user:main"),siteSettings:e})}var r=Ember.ArrayProxy.extend({selectedItemChanged:function(){var e=this.get("selectedItem");this.get("content").forEach((function(t){return t.set("selected",e===t)}))}.observes("selectedItem")});a.reopenClass({findAll:function(){var e=r.create({content:[],loading:!0});return(0,t.ajax)("/procourse-static-pages/admin/pages.json").then((function(t){t&&t.forEach((function(t){var s=JSON.parse(t.value);e.pushObject(a.create({id:s.id,title:s.title,active:s.active,slug:s.slug,group:s.group,raw:s.raw,cooked:s.cooked,custom_slug:s.custom_slug,html:s.html,html_content:s.html_content}))})),e.set("loading",!1)})),e},save:function(e){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.get("disableSave")){e.set("savingStatus",I18n.t("saving")),e.set("saving",!0);var n={active:e.active};if(e.id&&(n.id=e.id),!e||!l){if(e.html)var i="";else i=new Handlebars.SafeString(new s.default(o()).cook(e.raw));n.title=e.title,n.slug=e.slug,n.group=e.group,n.raw=e.raw,n.cooked=i.string,n.custom_slug=e.custom_slug,n.html=e.html,n.html_content=e.html_content}return(0,t.ajax)("/procourse-static-pages/admin/pages.json",{data:JSON.stringify({page:n}),type:e.id?"PUT":"POST",dataType:"json",contentType:"application/json"}).catch((function(e){if(e.jqXHR.responseJSON&&e.jqXHR.responseJSON.errors&&e.jqXHR.responseJSON.errors[0])return bootbox.alert(e.jqXHR.responseJSON.errors[0])})).then((function(t){t.id&&(e.set("id",t.id),e.set("savingStatus",I18n.t("saved")),e.set("saving",!1))}))}},copy:function(e){var t=a.create(e);return t.id=null,t},destroy:function(e){if(e.id){var s={id:e.id};return(0,t.ajax)("/procourse-static-pages/admin/pages.json",{data:JSON.stringify({page:s}),type:"DELETE",dataType:"json",contentType:"application/json"})}},customGroups:function(){return l.default.findAll().then((function(e){return e.filter((function(e){return!e.get("automatic")}))}))}});var c=a;e.default=c})),define("discourse/plugins/procourse-static-pages/discourse/procourse-static-pages-route-map",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.route("procourse-static-pages",{path:"/page"},(function(){this.route("page",{path:"/"},(function(){this.route("show",{path:"/:slug/:id"})}))}))}})),define("discourse/plugins/procourse-static-pages/discourse/routes/admin-plugins-procourse-static-pages",["exports","../models/page","discourse/routes/discourse"],(function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=s.default.extend({model:function(){return t.default.findAll()},setupController:function(e,t){e.setProperties({model:t})}});e.default=l})),define("discourse/plugins/procourse-static-pages/discourse/routes/procourse-static-pages-page-show",["exports","../models/page-show","discourse/lib/url","discourse/routes/discourse"],(function(e,t,s,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l.default.extend({model:function(e){return t.default.findById(e)},titleToken:function(){var e=this.modelFor("procourse-static-pages.page.show");if(e&&e.title)return e.title},setupController:function(e,t){e.setProperties({model:t})},afterModel:function(e){var t="/page/".concat(e.slug,"/").concat(e.id,"/");s.default.routeTo(t,{replaceURL:!0})}});e.default=n})),Ember.TEMPLATES["javascripts/admin/plugins-procourse-static-pages"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["page"],"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[24,["model","loading"]]]],{"statements":[[7,"div",true],[10,"class","customize procourse-static-pages admin admin-customize"],[8],[0,"\\n  "],[7,"div",true],[10,"class","admin-container"],[8],[0,"\\n    "],[7,"div",true],[10,"class","content-list span6"],[8],[0,"\\n      "],[7,"h3",true],[8],[1,[28,"i18n",["procourse_static_pages.title"],null],false],[9],[0,"\\n      "],[7,"ul",true],[8],[0,"\\n"],[4,"each",[[24,["model"]]],null,{"statements":[[0,"        "],[7,"li",true],[8],[7,"a",false],[12,"class",[29,[[28,"if",[[23,1,["selected"]],"active"],null]]]],[3,"action",[[23,0,[]],"selectPCPage",[23,1,[]]]],[8],[1,[23,1,["title"]],false],[9],[9],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[9],[0,"\\n"],[4,"unless",[[24,["model"]]],null,{"statements":[[0,"        "],[7,"p",true],[10,"class","desc"],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.no_pages"],null],false],[9],[0,"\\n"]],"parameters":[]},null],[0,"      "],[1,[28,"d-button",null,[["class","action","label","icon"],["btn","newPCPage","admin.customize.new","plus"]]],false],[0,"\\n    "],[9],[0,"\\n"],[4,"if",[[24,["selectedItem","selected"]]],null,{"statements":[[0,"    "],[7,"div",true],[10,"class","show-current-style current-style color-scheme"],[8],[0,"\\n      "],[7,"div",true],[10,"class","admin-container"],[8],[0,"\\n          "],[7,"h1",true],[8],[1,[28,"text-field",null,[["class","value"],["style-name",[24,["selectedItem","title"]]]]],false],[9],[0,"\\n          "],[7,"div",true],[10,"class","controls"],[8],[0,"\\n          "],[7,"button",false],[12,"disabled",[22,"disableSave"]],[12,"class","btn"],[3,"action",[[23,0,[]],"save"]],[8],[1,[28,"i18n",["admin.customize.save"],null],false],[9],[0,"\\n          "],[7,"button",false],[12,"disabled",[22,"disableEnable"]],[12,"class","btn"],[3,"action",[[23,0,[]],"toggleEnabled"]],[8],[0,"\\n"],[4,"if",[[24,["selectedItem","active"]]],null,{"statements":[[0,"              "],[1,[28,"i18n",["disable"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[28,"i18n",["enable"],null],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[9],[0,"\\n          "],[7,"button",false],[12,"class","btn"],[3,"action",[[23,0,[]],"copy",[24,["selectedItem"]]]],[8],[1,[28,"d-icon",["copy"],null],false],[0," "],[1,[28,"i18n",["admin.customize.copy"],null],false],[9],[0,"\\n          "],[7,"button",false],[12,"class","btn btn-danger"],[3,"action",[[23,0,[]],"destroy"]],[8],[1,[28,"d-icon",["trash"],null],false],[0," "],[1,[28,"i18n",["admin.customize.delete"],null],false],[9],[0,"\\n          "],[7,"span",true],[11,"class",[29,["saving ",[28,"unless",[[24,["selectedItem","savingStatus"]],"hidden"],null]]]],[8],[1,[24,["selectedItem","savingStatus"]],false],[9],[0,"\\n        "],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"br",true],[8],[9],[0,"\\n        "],[7,"form",true],[10,"class","form-horizontal"],[8],[0,"\\n"],[4,"if",[[24,["selectedItem","id"]]],null,{"statements":[[0,"        "],[7,"div",true],[8],[0,"\\n          "],[7,"label",true],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.id"],null],false],[0,": "],[1,[24,["selectedItem","id"]],false],[9],[0,"\\n          "],[7,"p",true],[10,"class","help"],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.page_url_description"],null],false],[0,": "],[7,"a",true],[10,"target","_blank"],[11,"href",[29,[[22,"pageURL"],[24,["selectedItem","slug"]],"/",[24,["selectedItem","id"]],"/"]]],[8],[1,[22,"pageURL"],false],[1,[24,["selectedItem","slug"]],false],[0,"/"],[1,[24,["selectedItem","id"]],false],[0,"/"],[9],[9],[0,"\\n        "],[9],[0,"\\n"]],"parameters":[]},null],[0,"        "],[7,"div",true],[8],[0,"\\n          "],[7,"label",true],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.slug"],null],false],[9],[0,"\\n          "],[1,[28,"text-field",null,[["class","value","enter"],["style-name",[24,["selectedItem","slug"]],[24,["editSlug"]]]]],false],[0,"\\n          "],[7,"p",true],[10,"class","help"],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.slug_description"],null],false],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"div",true],[8],[0,"\\n          "],[7,"label",true],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.limit_group"],null],false],[9],[0,"\\n          "],[1,[28,"combo-box",null,[["content","valueAttribute","value","none"],[[24,["customGroups"]],"id",[24,["selectedItem","group"]],"admin.procourse_static_pages.groups.bulk_select"]]],false],[0,"\\n          "],[7,"p",true],[10,"class","help"],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.limit_group_description"],null],false],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"div",true],[8],[0,"\\n          "],[7,"label",true],[8],[0,"\\n            "],[1,[28,"input",null,[["type","name","checked"],["checkbox","html",[24,["selectedItem","html"]]]]],false],[0,"\\n            "],[1,[28,"i18n",["admin.procourse_static_pages.pages.html"],null],false],[0,"\\n          "],[9],[0,"\\n          "],[7,"p",true],[10,"class","help"],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.html_description"],null],false],[9],[0,"\\n        "],[9],[0,"\\n        "],[7,"div",true],[8],[0,"\\n"],[4,"if",[[24,["selectedItem","html"]]],null,{"statements":[[0,"            "],[1,[28,"ace-editor",null,[["content","editorId","mode","autofocus"],[[24,["selectedItem","html_content"]],"html|common","html","true"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"            "],[1,[28,"d-editor",null,[["value","class"],[[24,["selectedItem","raw"]],"raw-bio"]]],false],[0,"\\n"]],"parameters":[]}],[0,"        "],[9],[0,"\\n        "],[9],[0,"\\n    "],[9],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div",true],[10,"class","current-style color-scheme badges"],[8],[1,[28,"i18n",["admin.procourse_static_pages.pages.no_page_selected"],null],false],[9],[0,"\\n"]],"parameters":[]}],[0,"  "],[9],[0,"\\n"],[9],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/admin/plugins-procourse-static-pages"}}),Ember.TEMPLATES["javascripts/procourse-static-pages/page/show"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div",true],[10,"class","static-page"],[8],[0,"\\n"],[4,"if",[[24,["model","html"]]],null,{"statements":[[0,"    "],[1,[24,["model","html_content"]],true],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[24,["model","cooked"]],true],[0,"\\n"]],"parameters":[]}],[9]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/templates/procourse-static-pages/page/show"}}),define("discourse/plugins/procourse-static-pages/lib/discourse-markdown/whitelist-tags",["exports"],(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setup=function(e){e.whiteList(["a.btn","a.btn btn-primary","a.btn btn-danger","button","button.btn","button.btn btn-primary","button.btn btn-danger","ul.nav","ul.nav-pills","ul.nav nav-pills"])}}));